import{j as e,f as D,r as j,u as oe,S as X,L as ne}from"./index-PLDaagTA.js";import{M as Q,T as W,R as ie}from"./Tree-6vvdrwOw.js";import{a as ce,T as de}from"./DrawerButton-DwQOXQlS.js";import{u as Z,m as pe,l as ge}from"./Layout-XD39IB8x.js";import{u as me,E as P}from"./index.esm-CS4zo5jb.js";import{a as A,n as K}from"./toast-DhrUUM-V.js";import{L as i}from"./LabelArea-DC4hSjvs.js";import{S as k}from"./SwitchToggle-BXv17vg8.js";import{u as he}from"./useDisableForDemo-DjtHBIR8.js";import{P as ue,C as ee,A as Y}from"./ProductServices-Cz4MygcK.js";import{C as xe}from"./CouponServices-0CD9yxjP.js";import{C as je}from"./CurrencyServices-BlJ4lGlV.js";import{u as be}from"./useAsync-frAQ4t-E.js";const J=({register:m,name:c,label:S,placeholder:b,required:w,type:f,value:x})=>e.jsx(e.Fragment,{children:e.jsx(D.Textarea,{className:"border text-sm border-gray-200 focus:border-gray-300 block w-full bg-gray-100",...m(`${c}`,{required:w?`${S} is required!`:!1}),type:f,placeholder:b,name:c,value:x,rows:"4",spellCheck:"false"})}),fe=(m,c="en",S)=>{const[b,w]=j.useState(""),[f,x]=j.useState([]),h=oe(),[_,E]=j.useState(""),[d,R]=j.useState(!0),[F,a]=j.useState(!0),[t,r]=j.useState([]),[l,v]=j.useState([]),[M,U]=j.useState(!1),[q,N]=j.useState(""),{isBulkDrawerOpen:V,closeBulkDrawer:C,setIsUpdate:T}=j.useContext(X),{handleDisableForDemo:H}=he(),{register:L,handleSubmit:G,watch:I,setValue:n,clearErrors:o,formState:{errors:z}}=me(),$=async s=>{var y,p,O;if(!H())try{const u={ids:m,categories:t==null?void 0:t.map(g=>g._id),category:(y=l[0])==null?void 0:y._id,productType:[M?"food":"others"],show:s.show,status:d?"show":"hide",tag:JSON.stringify(f)},B={ids:m,status:d?"show":"hide"},se={ids:m,enabled:d?"show":"hide",live_exchange_rates:F?"show":"hide"},ae={ids:m,parentId:_,description:s.description,parentName:q,status:d?"show":"hide"},re={ids:m,option:s.option,status:d?"show":"hide"},te={ids:m,currentId:S,changeId:s.groupName,status:d?"show":"hide"},le={ids:m,startTime:s.startTime,endTime:s.endTime,status:d?"show":"hide"};if(h.pathname==="/products"){const g=await ue.updateManyProducts(u);T(!0),A(g.message),C()}if(h.pathname==="/coupons"){const g=await xe.updateManyCoupons(le);T(!0),A(g.message),C()}if(h.pathname==="/languages"){const g=await ne.updateManyLanguage(B);T(!0),A(g.message),C()}if(h.pathname==="/currencies"){const g=await je.updateManyCurrencies(se);T(!0),A(g.message),C()}if(h.pathname==="/categories"||h.pathname===`/categories/${S}`){const g=await ee.updateManyCategory(ae);T(!0),A(g.message),C()}if(h.pathname==="/attributes"){const g=await Y.updateManyAttribute(re);T(!0),A(g.message),C()}if(h.pathname===`/attributes/${h.pathname.split("/")[2]}`){const g=await Y.updateManyChildAttribute(te);T(!0),A(g.message),C()}}catch(u){K(((O=(p=u==null?void 0:u.response)==null?void 0:p.data)==null?void 0:O.message)||(u==null?void 0:u.message))}};return j.useEffect(()=>{if(!V){n("parent"),n("children"),n("type"),n("show"),n("name"),w(""),x([]),o("parent"),o("children"),o("type"),o("name"),n("name"),n("iso_code"),n("call_prefix"),n("currency"),n("zone"),o("name"),o("iso_code"),o("call_prefix"),o("currency"),o("zone"),o("status"),n("name"),n("iso_code"),n("country"),n("zone"),n("description"),o("name"),o("iso_code"),o("country"),o("zone"),o("status"),o("show"),o("description"),v([]),r([]);return}},[n,V,o]),j.useEffect(()=>{w(I("children"))},[I,b]),{register:L,watch:I,handleSubmit:G,onSubmit:$,errors:z,tag:f,setTag:x,published:d,setPublished:R,published2:F,setPublished2:a,checked:_,setChecked:E,selectedCategory:t,setSelectedCategory:r,defaultCategory:l,setDefaultCategory:v,selectCategoryName:q,setSelectCategoryName:N,isFoodItem:M,setIsFoodItem:U}},ye=({selectedCategory:m,setSelectedCategory:c,setDefaultCategory:S})=>{var F;const{data:b,loading:w}=be((F=ee)==null?void 0:F.getAllCategory),{showingTranslateValue:f}=Z(),x=`
  .rc-tree-child-tree {
    display: block;
  }
  .node-motion {
    transition: all .3s;
    overflow-y: hidden;
  }
`,h={motionName:"node-motion",motionAppear:!1,onAppearStart:a=>({height:0}),onAppearActive:a=>({height:a.scrollHeight}),onLeaveStart:a=>({height:a.offsetHeight}),onLeaveActive:()=>({height:0})},_=a=>{var r;let t=[];for(let l of a)t.push({title:f(l.name),key:l._id,children:((r=l==null?void 0:l.children)==null?void 0:r.length)>0&&_(l.children)});return t},E=(a,t)=>{var r;return a._id===t?a:(r=a==null?void 0:a.children)==null?void 0:r.reduce((l,v)=>l??E(v,t),void 0)},d=a=>{const t=b[0],r=E(t,a);if(r!==void 0){if(m.filter(v=>v._id===r._id).length!==0)return A("This category already selected!");c(v=>[...v,{_id:r==null?void 0:r._id,name:f(r==null?void 0:r.name)}]),S(()=>[{_id:r==null?void 0:r._id,name:f(r==null?void 0:r.name)}])}},R=a=>{c(a)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2",children:e.jsx(Q,{displayValue:"name",groupBy:"name",isObject:!0,hidePlaceholder:!0,onKeyPressFn:function(){},onRemove:a=>R(a),onSearch:function(){},onSelect:a=>d(a),selectedValues:m,placeholder:"Select Category"})}),!w&&b!==void 0&&e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:x}}),e.jsx(W,{expandAction:"click",treeData:_(b),onSelect:a=>d(a[0]),motion:h,animation:"slide-up"})]})]})},Ee=({ids:m,title:c,lang:S,data:b,childId:w,attributes:f,isCheck:x})=>{const{toggleBulkDrawer:h,isBulkDrawerOpen:_,closeBulkDrawer:E}=j.useContext(X),{showingTranslateValue:d}=Z(),{tag:R,setTag:F,published:a,register:t,onSubmit:r,errors:l,checked:v,setChecked:M,resetRefTwo:U,handleSubmit:q,setPublished:N,selectedCategory:V,setSelectedCategory:C,defaultCategory:T,setDefaultCategory:H,selectCategoryName:L,setSelectCategoryName:G}=fe(m,S,w),I={motionName:"node-motion",motionAppear:!1,onAppearStart:s=>({height:0}),onAppearActive:s=>({height:s.scrollHeight}),onLeaveStart:s=>({height:s.offsetHeight}),onLeaveActive:()=>({height:0})},n=s=>{let y=[];for(let p of s)y.push({title:d(p==null?void 0:p.name),key:p._id,children:p.children.length>0&&n(p.children)});return y},o=(s,y)=>{var p;return s._id===y?s:(p=s==null?void 0:s.children)==null?void 0:p.reduce((O,u)=>O??o(u,y),void 0)},z=s=>{var p,O;const y=x==null?void 0:x.find(u=>u===s);if((x==null?void 0:x.length)===((O=(p=b[0])==null?void 0:p.children)==null?void 0:O.length))return K("This can't be select as a parent category!");if(y!==void 0)return K("This can't be select as a parent category!");if(s===w)return K("This can't be select as a parent category!");{if(s===void 0)return;M(s);const u=b[0],B=o(u,s);G(d(B==null?void 0:B.name))}},$=`
  .rc-tree-child-tree {
    display: hidden;
  }
  .node-motion {
    transition: all .3s;
    overflow-y: hidden;
  }
`;return e.jsx(e.Fragment,{children:e.jsxs(ce,{open:_,onClose:E,parent:null,level:null,placement:"right",children:[e.jsx("button",{onClick:h,className:"absolute z-50 text-red-500 hover:bg-red-100 hover:text-gray-700 transition-colors duration-150 bg-white shadow-md mr-6 mt-6 right-0 left-auto w-10 h-10 rounded-full block text-center",children:e.jsx(pe,{className:"mx-auto"})}),e.jsxs("div",{className:"flex flex-col w-full h-full justify-between",children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:e.jsx(de,{title:`Update Selected ${c}`,description:`Apply changes to the selected ${c} from the list`})}),e.jsx(ge.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:q(r),className:"block",children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow w-full h-full max-h-full pb-40 md:pb-32 lg:pb-32 xl:pb-32",children:[c==="Products"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Categorys"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(ye,{lang:S,selectedCategory:V,setSelectedCategory:C,setDefaultCategory:H})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Default Category"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(Q,{displayValue:"name",isObject:!0,singleSelect:!0,ref:U,hidePlaceholder:!0,onKeyPressFn:function(){},onRemove:function(){},onSearch:function(){},onSelect:s=>H(s),selectedValues:T,options:V,placeholder:"Default Category"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(k,{handleProcess:N,processOption:a}),e.jsx(P,{errorName:l.status})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Product Tags"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(ie,{placeholder:"Product Tag (Write then press enter to add new tag )",tags:R,onChange:s=>F(s)})})]})]}),c==="Coupons"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Start Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(D.Input,{...t("startTime",{required:"Coupon Validation Start Time"}),label:"Coupon Validation Start Time",name:"startTime",type:"datetime-local",placeholder:"Start Time"}),e.jsx(P,{errorName:l.startTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"End Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(D.Input,{...t("endTime",{required:"Coupon Validation End Time"}),label:"Coupon Validation End Time",name:"endTime",type:"datetime-local",placeholder:"End Time"}),e.jsx(P,{errorName:l.endTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(k,{handleProcess:N,processOption:a}),e.jsx(P,{errorName:l.published})]})]})]}),c==="Languages"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(k,{title:"",processOption:a,handleProcess:N})})]})}),c==="Currencies"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Enabled"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(k,{title:"",processOption:a,handleProcess:N})})]})}),c==="Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(J,{register:t,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(P,{errorName:l.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(D.Input,{readOnly:!0,...t("parent",{required:!1}),name:"parent",value:L||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:$}}),e.jsx(W,{treeData:n(b),selectedKeys:[v],onSelect:s=>z(s[0]),motion:I,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(k,{title:"",processOption:a,handleProcess:N})})]})]}),c==="Child Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(J,{register:t,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(P,{errorName:l.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(D.Input,{readOnly:!0,...t("parent",{required:!1}),name:"parent",value:L||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:$}}),e.jsx(W,{treeData:n(b),selectedKeys:[v],onSelect:s=>z(s[0]),motion:I,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(k,{title:"",processOption:a,handleProcess:N})})]})]}),c==="Attributes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Options"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(D.Select,{name:"option",...t("option",{required:"Option is required!"}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select type"}),e.jsx("option",{value:"Dropdown",children:"Dropdown"}),e.jsx("option",{value:"Radio",children:"Radio"})]}),e.jsx(P,{errorName:l.option})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(k,{title:"",processOption:a,handleProcess:N})})]})]}),c==="Attribute Value(s)"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Change Attribute Group"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(D.Select,{name:"groupName",...t("groupName",{required:!1}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select Attribute Group"}),f==null?void 0:f.map((s,y)=>e.jsx("option",{value:s._id,children:d(s==null?void 0:s.name)},y+1))]}),e.jsx(P,{errorName:l.groupName})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(i,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(k,{title:"",processOption:a,handleProcess:N})})]})]})]}),e.jsxs("div",{className:"fixed bottom-0 w-full right-0 py-4 lg:py-8 px-6 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex bg-gray-50 border-t border-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(D.Button,{onClick:h,className:" text-red-500 hover:bg-red-50 hover:border-red-100 hover:text-red-600 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-500 dark:hover:bg-gray-800 dark:hover:text-red-700",layout:"outline",children:"Cancel"})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(D.Button,{type:"submit",className:"h-12 w-full",children:[" ","Bulk Update ",c]})})]})]})})]})]})})};export{Ee as B};
