import{r as h,S as E,i as v,j as e,f as d}from"./index-PLDaagTA.js";import{C as D,E as I}from"./EditDeleteButton-jztksUNk.js";import{T as y,D as k,u as B,M}from"./DrawerButton-DwQOXQlS.js";import{D as F}from"./DeleteModal-BuBHmZHf.js";import{S as L}from"./Layout-XD39IB8x.js";import{u as V,E as C}from"./index.esm-CS4zo5jb.js";import{L as N}from"./LabelArea-DC4hSjvs.js";import{C as w}from"./ProductServices-Cz4MygcK.js";import{a as T,n as q}from"./toast-DhrUUM-V.js";const O=(r,j)=>{const{isDrawerOpen:a,closeDrawer:c,setIsUpdate:u}=h.useContext(E),[b,i]=h.useState(!1),{register:p,handleSubmit:g,setValue:m,clearErrors:s,formState:{errors:l}}=V(),f=async n=>{var x,t;try{i(!0);const o={name:n.name,slug:n.slug};if(r){const S=await w.updateCategory(r,o);u(!0),T("Cập nhật danh mục thành công!"),c()}else{const S=await w.addCategory(o);u(!0),T("Thêm danh mục thành công!"),c()}}catch(o){q(((t=(x=o==null?void 0:o.response)==null?void 0:x.data)==null?void 0:t.message)||"Có lỗi xảy ra!")}finally{i(!1)}};return h.useEffect(()=>{a||(m("name",""),m("slug",""),s("name"),s("slug"))},[a,m,s]),{register:p,handleSubmit:g,onSubmit:f,errors:l,isSubmitting:b}},R=({id:r,data:j})=>{const{t:a}=v(),{register:c,handleSubmit:u,onSubmit:b,errors:i,isSubmitting:p}=O(r),[g,m]=h.useState(""),[s,l]=h.useState("");h.useEffect(()=>{r&&w.getCategoryById(r).then(t=>{m(t.name),l(t.slug)}).catch(t=>console.error("Error fetching category:",t))},[r]);const f=t=>{const o=t.target.value;m(o);const S=o.toLowerCase().replace(/\s+/g,"-");l(S)},n=t=>{l(t.target.value)},x=t=>{b({name:g,slug:s})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:r?e.jsx(y,{title:a("Cập nhật danh mục")}):e.jsx(y,{title:a("Thêm danh mục")})}),e.jsx(L,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:u(x),children:[e.jsxs("div",{className:"p-6 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(N,{label:a("Tên danh mục")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(d.Input,{required:!0,value:g,onChange:f,type:"text",placeholder:a("Vd: Quần nam"),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white"}),e.jsx(C,{errorName:i.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(N,{label:a("Slug")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(d.Input,{value:s,onChange:n,type:"text",placeholder:a("Vd: quan-nam"),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white"}),e.jsx(C,{errorName:i.slug})]})]})]}),e.jsx(k,{id:r,title:"danh mục",isSubmitting:p})]})})]})},P=({data:r,lang:j,isCheck:a,categories:c,setIsCheck:u})=>{const{title:b,serviceId:i,handleModalOpen:p,handleUpdate:g}=B(),m=s=>{const{id:l,checked:f}=s.target;u(n=>f?n.includes(l)?n:[...n,l]:n.filter(x=>x!==l))};return e.jsxs(e.Fragment,{children:[(a==null?void 0:a.length)<1&&e.jsx(F,{id:i,title:b}),e.jsx(M,{children:e.jsx(R,{id:i,data:r,lang:j})}),e.jsx(d.TableBody,{children:c==null?void 0:c.map((s,l)=>e.jsxs(d.TableRow,{children:[e.jsx(d.TableCell,{children:e.jsx(D,{type:"checkbox",name:"category",id:String(s.id),handleClick:m,isChecked:a==null?void 0:a.includes(String(s.id))})}),e.jsx(d.TableCell,{className:"font-semibold uppercase text-xs",children:l+1}),e.jsx(d.TableCell,{className:"font-medium text-sm",children:s.name}),e.jsx(d.TableCell,{className:"text-sm",children:s.slug}),e.jsx(d.TableCell,{children:e.jsx(I,{id:s.id,title:s.name,handleUpdate:g,handleModalOpen:p})})]},s.id))})]})};export{R as C,P as a};
